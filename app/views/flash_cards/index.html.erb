<script type="text/javascript">
$(document).ready(function() {
  $('.dropdown').on('shown.bs.dropdown', function() {
    $('#flash_card_question').focus()
  })
})
</script>

<h1>Flash Cards
  <div class="dropdown pull-right">
    <button class="btn btn-lg btn-success dropdown-toggle"
            data-toggle="dropdown">
      <span class="glyphicon glyphicon-plus"></span>
      Add card
    </button>
    <div class="dropdown-menu dropdown-form">
      <%= form_for :flash_card, url: flash_cards_path do |f| %>
        <div class="form-group">
          <%= f.label      :question, class: 'sr-only' %>
          <%= f.text_field :question, placeholder: 'Question' %>
        </div>
        <div class="form-group">
          <%= f.label      :answer, class: 'sr-only' %>
          <%= f.text_field :answer, placeholder: 'Answer' %>
        </div>
        <%= f.submit 'Save', class: 'btn btn-block btn-primary' %>
      <% end %>
    </div>
  </div>
</h1>

<div ng-app="flashCards" ng-controller="flashCardController">
  <h2 ng-hide="card">
    Congratulations! You don't have any more cards to study today.
  </h2>

  <div ng-show="card" class="col-md-6 col-md-offset-3">
    <div class="text-center">
      <button ng-hide="beganReview" ng-click="beginReview()"
              class="btn btn-lg btn-primary">
        Begin review
      </button>

      <div ng-show="beganReview" class="panel panel-{{answerStatus()}}">
        <div class="panel-heading">
          {{card.question}}
        </div>
        <div class="panel-body">
          <form ng-submit="submitAnswer()">
            <input ng-model="guess" id="guess-input" />
          </form>
        </div>

        <div class="panel-footer">
          <div ng-hide="betweenCards" class="progress"
               style="margin-bottom: 0">
            <div class="progress-bar" style="width: {{timePercent()}}%">
            </div>
          </div>

          <button ng-show="betweenCards" ng-click="getNextCard(true)"
                  class="btn btn-xs btn-primary">
            Next
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
