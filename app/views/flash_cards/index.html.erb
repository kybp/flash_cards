<script type="text/javascript">
$(document).ready(function() {
  $('.dropdown').on('shown.bs.dropdown', function() {
    $('#flash_card_question').focus()
  })
})
</script>

<% content_for :controls do %>
  <div class="dropdown">
    <button class="btn btn-lg btn-success dropdown-toggle"
            data-toggle="dropdown">
      <span class="glyphicon glyphicon-plus"></span>
      Add card
    </button>
    <div class="dropdown-menu dropdown-form">
      <%= render 'new_flash_card_form' %>
    </div>
  </div>

  <%= link_to 'Sign out', destroy_user_session_path, method: :delete,
      class: 'btn btn-lg btn-danger' %>
<% end %>

<div ng-app="flashCards" ng-controller="flashCardController"
     class="vertical-center">
  <h2 ng-hide="card" 
      class="text-center col-xs-12 col-md-6 col-md-offset-3">
    Congratulations! You don't have any more cards to study today.
  </h2>

  <div ng-show="card"
       class="text-center col-xs-12 col-md-6 col-md-offset-3">
    <button ng-hide="beganReview" ng-click="beginReview()"
            class="btn btn-lg btn-primary">
      Begin review
    </button>

    <div ng-show="beganReview" class="panel panel-{{answerStatus()}}">
      <div class="panel-heading">
        {{card.question}}
      </div>
      <div class="panel-body">
        <form ng-submit="submitAnswer()">
          <input ng-model="guess" id="guess-input"
                 focus-on="! betweenCards" />
        </form>
      </div>

      <div class="panel-footer">
        <div ng-hide="betweenCards" class="progress"
             style="margin-bottom: 0">
          <div class="progress-bar progress-bar-{{timeStatus()}}"
               style="width: {{timePercent()}}%">
          </div>
        </div>

        <button ng-show="betweenCards" ng-click="getNextCard(true)"
                class="btn btn-xs btn-primary" focus-on="betweenCards">
          Next
        </button>
      </div>
    </div>
  </div>
</div>
